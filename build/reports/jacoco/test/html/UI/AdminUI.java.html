<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AdminUI.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">generatedProject</a> &gt; <a href="index.source.html" class="el_package">UI</a> &gt; <span class="el_source">AdminUI.java</span></div><h1>AdminUI.java</h1><pre class="source lang-java linenums">package UI;

import Controller.UserController;
import Model.RecordType;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;
import java.util.Scanner;

import static Model.RecordType.*;
import static Model.RecordType.CD;

public class AdminUI {
    private final Controller.UserController userController;
    private final Controller.RecordController recordController;
    private final Controller.TransactionController transactionController;
    private boolean running;

<span class="nc" id="L21">    public AdminUI(Controller.UserController userController, Controller.RecordController recordController, Controller.TransactionController transactionController) {</span>
<span class="nc" id="L22">        this.userController = userController;</span>
<span class="nc" id="L23">        this.recordController = recordController;</span>
<span class="nc" id="L24">        this.transactionController = transactionController;</span>
<span class="nc" id="L25">        this.running = true;</span>
<span class="nc" id="L26">    }</span>

    public void displayMenu() {
<span class="nc" id="L29">        System.out.println(&quot; ------------------------------------- &quot;);</span>
<span class="nc" id="L30">        System.out.println(&quot;1. Add record&quot;);</span>
<span class="nc" id="L31">        System.out.println(&quot;2. Add user&quot;);</span>
<span class="nc" id="L32">        System.out.println(&quot;3. List records&quot;);</span>
<span class="nc" id="L33">        System.out.println(&quot;4. List users&quot;);</span>
<span class="nc" id="L34">        System.out.println(&quot;5. Remove record&quot;);</span>
<span class="nc" id="L35">        System.out.println(&quot;6. Remove user&quot;);</span>
<span class="nc" id="L36">        System.out.println(&quot;7. Update record&quot;);</span>
<span class="nc" id="L37">        System.out.println(&quot;8. Update user&quot;);</span>
<span class="nc" id="L38">        System.out.println(&quot;9. Get most purchased records&quot;);</span>
<span class="nc" id="L39">        System.out.println(&quot;10. Filter transactions by date&quot;);</span>
<span class="nc" id="L40">        System.out.println(&quot;11. Filter users by the minimum amount of transactions&quot;);</span>
<span class="nc" id="L41">        System.out.println(&quot;0. Exit&quot;);</span>
<span class="nc" id="L42">        System.out.println(&quot; ------------------------------------- &quot;);</span>
<span class="nc" id="L43">    }</span>


    public void addRecord() throws Exception {
<span class="nc" id="L47">        Scanner input = new Scanner(System.in);</span>
<span class="nc" id="L48">        System.out.print(&quot;Enter the record ID: &quot;);</span>
<span class="nc" id="L49">        int recordId = input.nextInt(); input.nextLine();</span>
<span class="nc" id="L50">        System.out.print(&quot;Enter the album name: &quot;);</span>
<span class="nc" id="L51">        String name = input.nextLine();</span>
<span class="nc" id="L52">        System.out.print(&quot;Enter the price: &quot;);</span>
<span class="nc" id="L53">        int price = input.nextInt(); input.nextLine();</span>
<span class="nc" id="L54">        System.out.print(&quot;Enter the record type: &quot;);</span>
<span class="nc" id="L55">        String recordTypeAsString = input.nextLine().toLowerCase();</span>
<span class="nc bnc" id="L56" title="All 3 branches missed.">        RecordType recordType = switch (recordTypeAsString) {</span>
<span class="nc" id="L57">            case &quot;vinyl&quot; -&gt; VINYL;</span>
<span class="nc" id="L58">            case &quot;tape&quot; -&gt; TAPE;</span>
<span class="nc" id="L59">            default -&gt; CD;</span>
        };

<span class="nc" id="L62">        this.recordController.add(recordId, price, name, 1, recordType);</span>
<span class="nc" id="L63">    }</span>


    public void listRecords() {
<span class="nc" id="L67">        List&lt;String&gt; recordsAsStrings = this.recordController.getRepository();</span>
<span class="nc" id="L68">        System.out.println(&quot;Records:&quot;);</span>

<span class="nc" id="L70">        recordsAsStrings.forEach(System.out::println);</span>
<span class="nc" id="L71">    }</span>


    public void removeRecord() throws Exception {
<span class="nc" id="L75">        Scanner input = new Scanner(System.in);</span>
<span class="nc" id="L76">        System.out.print(&quot;Enter the record ID to delete: &quot;);</span>
<span class="nc" id="L77">        int recordId = input.nextInt(); input.nextLine();</span>

<span class="nc" id="L79">        this.recordController.remove(recordId);</span>
<span class="nc" id="L80">    }</span>


    public void updateRecord() throws Exception {
<span class="nc" id="L84">        Scanner input = new Scanner(System.in);</span>
<span class="nc" id="L85">        System.out.print(&quot;Enter the record ID to update: &quot;);</span>
<span class="nc" id="L86">        int recordId = input.nextInt(); input.nextLine();</span>
<span class="nc" id="L87">        System.out.print(&quot;Enter the new album name: &quot;);</span>
<span class="nc" id="L88">        String name = input.nextLine();</span>
<span class="nc" id="L89">        System.out.print(&quot;Enter the new price: &quot;);</span>
<span class="nc" id="L90">        int price = input.nextInt(); input.nextLine();</span>
<span class="nc" id="L91">        System.out.print(&quot;Enter the new number of copies in stock: &quot;);</span>
<span class="nc" id="L92">        int newInStock = input.nextInt(); input.nextLine();</span>
<span class="nc" id="L93">        System.out.print(&quot;Enter the new record type: &quot;);</span>
<span class="nc" id="L94">        String recordTypeAsString = input.nextLine().toLowerCase();</span>
<span class="nc bnc" id="L95" title="All 3 branches missed.">        RecordType recordType = switch (recordTypeAsString) {</span>
<span class="nc" id="L96">            case &quot;vinyl&quot; -&gt; VINYL;</span>
<span class="nc" id="L97">            case &quot;tape&quot; -&gt; TAPE;</span>
<span class="nc" id="L98">            default -&gt; CD;</span>
        };

<span class="nc" id="L101">        System.out.println(recordType.toString());</span>
<span class="nc" id="L102">        this.recordController.update(recordId, price, name, newInStock, recordType);</span>
<span class="nc" id="L103">    }</span>


    public void addUser() throws Exception {
<span class="nc" id="L107">        Scanner input = new Scanner(System.in);</span>

<span class="nc" id="L109">        System.out.print(&quot;User ID: &quot;);</span>
<span class="nc" id="L110">        int userId = input.nextInt(); input.nextLine();</span>
<span class="nc" id="L111">        System.out.print(&quot;First name: &quot;);</span>
<span class="nc" id="L112">        String firstName = input.nextLine();</span>
<span class="nc" id="L113">        System.out.print(&quot;Second name: &quot;);</span>
<span class="nc" id="L114">        String lastName = input.nextLine();</span>

<span class="nc" id="L116">        this.userController.add(userId, firstName, lastName, 0);</span>
<span class="nc" id="L117">    }</span>


    public void listUsers() {
<span class="nc" id="L121">        List&lt;String&gt; usersAsStrings = this.userController.getRepository();</span>
<span class="nc" id="L122">        System.out.println(&quot;Users:&quot;);</span>

<span class="nc" id="L124">        usersAsStrings.forEach(System.out::println);</span>
<span class="nc" id="L125">    }</span>


    public void removeUser() throws Exception {
<span class="nc" id="L129">        Scanner input = new Scanner(System.in);</span>
<span class="nc" id="L130">        System.out.print(&quot;Enter the user ID to delete: &quot;);</span>
<span class="nc" id="L131">        int userId = input.nextInt(); input.nextLine();</span>

<span class="nc" id="L133">        this.userController.remove(userId);</span>
<span class="nc" id="L134">    }</span>


    public void updateUser() throws Exception {
<span class="nc" id="L138">        Scanner input = new Scanner(System.in);</span>

<span class="nc" id="L140">        System.out.print(&quot;User ID to update: &quot;);</span>
<span class="nc" id="L141">        int userId = input.nextInt(); input.nextLine();</span>
<span class="nc" id="L142">        System.out.print(&quot;New first name: &quot;);</span>
<span class="nc" id="L143">        String firstName = input.nextLine();</span>
<span class="nc" id="L144">        System.out.print(&quot;New second name: &quot;);</span>
<span class="nc" id="L145">        String lastName = input.nextLine();</span>

<span class="nc" id="L147">        this.userController.update(userId, firstName, lastName, 0);</span>
<span class="nc" id="L148">    }</span>


    public void run() {
<span class="nc" id="L152">        Scanner input = new Scanner(System.in);</span>
<span class="nc" id="L153">        this.running = true;</span>
<span class="nc" id="L154">        int option = 0;</span>

<span class="nc bnc" id="L156" title="All 2 branches missed.">        while (this.running) {</span>
<span class="nc" id="L157">            this.displayMenu();</span>
<span class="nc" id="L158">            System.out.print(&quot;Enter an option: &quot;);</span>
<span class="nc" id="L159">            option = input.nextInt();</span>

            try {
<span class="nc bnc" id="L162" title="All 13 branches missed.">                switch (option) {</span>
<span class="nc" id="L163">                    case 0 -&gt; this.running = false;</span>
<span class="nc" id="L164">                    case 1 -&gt; addRecord();</span>
<span class="nc" id="L165">                    case 2 -&gt; addUser();</span>
<span class="nc" id="L166">                    case 3 -&gt; listRecords();</span>
<span class="nc" id="L167">                    case 4 -&gt; listUsers();</span>
<span class="nc" id="L168">                    case 5 -&gt; removeRecord();</span>
<span class="nc" id="L169">                    case 6 -&gt; removeUser();</span>
<span class="nc" id="L170">                    case 7 -&gt; updateRecord();</span>
<span class="nc" id="L171">                    case 8 -&gt; updateUser();</span>
<span class="nc" id="L172">                    case 9 -&gt; mostPurchasedRecords();</span>
<span class="nc" id="L173">                    case 10 -&gt; filterTransactionsByDate();</span>
<span class="nc" id="L174">                    case 11 -&gt; filterUsersByMinimumTransactions();</span>
<span class="nc" id="L175">                    default -&gt; System.out.println(&quot;Enter an option between 1 and 11.&quot;);</span>
                }
<span class="nc" id="L177">            }catch(Exception exception){</span>
<span class="nc" id="L178">                System.out.println(exception.getMessage());</span>
<span class="nc" id="L179">            }</span>
        }
<span class="nc" id="L181">    }</span>

    private void filterUsersByMinimumTransactions() {
<span class="nc" id="L184">        Scanner input = new Scanner(System.in);</span>
<span class="nc" id="L185">        System.out.println(&quot;please enter the minimum amount of transactions: &quot;);</span>
<span class="nc" id="L186">        this.userController.filterByNumberOfTransactions(input.nextInt()).forEach(System.out::println);</span>
<span class="nc" id="L187">    }</span>

    private void filterTransactionsByDate() {
<span class="nc" id="L190">        System.out.println(&quot;enter the day you want the transactions from (dd/MM/yyyy): &quot;);</span>
<span class="nc" id="L191">        Scanner input = new Scanner(System.in);</span>
<span class="nc" id="L192">        Date date = null;</span>
        try {
<span class="nc" id="L194">            date = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).parse(input.nextLine());</span>
<span class="nc" id="L195">            System.out.println(this.transactionController.filterByDate(date));</span>
<span class="nc" id="L196">        } catch (ParseException e) {</span>
<span class="nc" id="L197">            e.printStackTrace();</span>
<span class="nc" id="L198">        }</span>
<span class="nc" id="L199">    }</span>

    private void mostPurchasedRecords() {
<span class="nc" id="L202">        System.out.println(this.transactionController.getMostPurchasedRecords());</span>
<span class="nc" id="L203">    }</span>
}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>