<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Record.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">distributableApplication</a> &gt; <a href="index.source.html" class="el_package">Model</a> &gt; <span class="el_source">Record.java</span></div><h1>Record.java</h1><pre class="source lang-java linenums">package Model;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;

import java.util.function.BiFunction;
import java.util.function.Function;

public class Record extends BaseEntity&lt;Integer&gt;{
    private final int Price;
    private final String AlbumName;
    private final int InStock;
    private final RecordType TypeOfRecord;

    /**
     * @param price - integer
     * @param AlbumName - string
     * @param inStock - integer
     * @param typeOfRecord - RecordType
     */
<span class="fc" id="L22">    public Record(int price, String AlbumName, int inStock, RecordType typeOfRecord) {</span>
<span class="fc" id="L23">        Price = price;</span>
<span class="fc" id="L24">        this.AlbumName = AlbumName;</span>
<span class="fc" id="L25">        InStock = inStock;</span>
<span class="fc" id="L26">        TypeOfRecord = typeOfRecord;</span>
<span class="fc" id="L27">    }</span>

    /**
     *
     * @return String of the Record object
     */
    @Override
    public String toString() {
<span class="nc" id="L35">        return &quot;Record{&quot; +</span>
<span class="nc" id="L36">                &quot;RecordID=&quot; + getId() +</span>
                &quot;, Price=&quot; + Price +
                &quot;, AlbumName='&quot; + AlbumName + '\'' +
                &quot;, InStock=&quot; + InStock +
                &quot;, TypeOfRecord=&quot; + TypeOfRecord +
                '}';
    }

    /**
     *
     * @param obj - an object to be compared
     * @return true - if the objects are the same or if their ids are the same
     *         false - if the objects don't have the same class
     */
    @Override
    public boolean equals(Object obj) {
<span class="pc bpc" id="L52" title="1 of 2 branches missed.">        if(this == obj)return true;</span>
<span class="pc bpc" id="L53" title="2 of 4 branches missed.">        if(obj == null || getClass() != obj.getClass()) return false;</span>

<span class="fc" id="L55">        Record record = (Record) obj;</span>

<span class="fc" id="L57">        return getId().equals(record.getId());</span>
    }

    /**
     *
     * @return the price of a Record
     */
    public int getPrice() {
<span class="fc" id="L65">        return Price;</span>
    }

    /**
     *
     * @return the album name of a record
     */
    public String getAlbumName() {
<span class="fc" id="L73">        return AlbumName;</span>
    }

    /**
     *
     * @return the amount of stock for a Record
     */
    public int getInStock() {
<span class="fc" id="L81">        return InStock;</span>
    }

    /**
     *
     * @return the record type of a record
     */
    public RecordType getTypeOfRecord() {
<span class="fc" id="L89">        return TypeOfRecord;</span>
    }

    public static Function reader(Function&lt;String, Record&gt; function){
<span class="fc" id="L93">        return function;</span>
    }

    public static Function writer(Function&lt;Record, String&gt; function){
<span class="fc" id="L97">        return function;</span>
    }

    public static String fileWriter(BaseEntity&lt;Integer&gt; baseEntity){
<span class="pc bpc" id="L101" title="1 of 2 branches missed.">        if (baseEntity.getClass() == Record.class) {</span>
<span class="fc" id="L102">            Record record = (Record) baseEntity;</span>
<span class="fc" id="L103">            return record.getId() + &quot; | &quot; + record.Price + &quot; | &quot; + record.AlbumName + &quot; | &quot; + record.InStock + &quot; | &quot; + record.TypeOfRecord;</span>
        }
<span class="nc" id="L105">        return &quot;&quot;;</span>
    }

    public static Record fileReader(String line){
<span class="fc" id="L109">        String[] parts = line.split(&quot; \\| &quot;);</span>
<span class="fc" id="L110">        Record record = new Record(Integer.parseInt(parts[1]), parts[2], Integer.parseInt(parts[3]), RecordType.valueOf(parts[4]));</span>
<span class="fc" id="L111">        record.setId(Integer.parseInt(parts[0]));</span>
<span class="fc" id="L112">        return record;</span>
    }

<span class="fc" id="L115">    public static BiFunction&lt;Record, Document, Node&gt; recordEncoder = (r, d) -&gt; {</span>
<span class="fc" id="L116">        Element recordElement = d.createElement(&quot;record&quot;);</span>
<span class="fc" id="L117">        recordElement.setAttribute(&quot;id&quot;, Integer.toString(r.getId()));</span>
<span class="fc" id="L118">        addChildWithTextContent(d, recordElement, &quot;price&quot;, Integer.toString(r.getPrice()));</span>
<span class="fc" id="L119">        addChildWithTextContent(d, recordElement, &quot;albumName&quot;, r.getAlbumName());</span>
<span class="fc" id="L120">        addChildWithTextContent(d, recordElement, &quot;inStock&quot;, Integer.toString(r.getInStock()));</span>
<span class="fc" id="L121">        addChildWithTextContent(d, recordElement, &quot;typeOfRecord&quot;, parseRecordTypeToString(r.getTypeOfRecord()));</span>
<span class="fc" id="L122">        return recordElement;</span>
    };

    private static void addChildWithTextContent(Document document, Element parent, String tagName, String textContent){
<span class="fc" id="L126">        Element childElement = document.createElement(tagName);</span>
<span class="fc" id="L127">        childElement.setTextContent(textContent);</span>
<span class="fc" id="L128">        parent.appendChild(childElement);</span>
<span class="fc" id="L129">    }</span>

<span class="fc" id="L131">    public static Function&lt;Element, Record&gt; recordDecoder = e -&gt;{</span>
<span class="fc" id="L132">        Record record = new Record(</span>
<span class="fc" id="L133">                Integer.parseInt(e.getElementsByTagName(&quot;price&quot;).item(0).getTextContent()),</span>
<span class="fc" id="L134">                e.getElementsByTagName(&quot;albumName&quot;).item(0).getTextContent(),</span>
<span class="fc" id="L135">                Integer.parseInt(e.getElementsByTagName(&quot;inStock&quot;).item(0).getTextContent()),</span>
<span class="fc" id="L136">                parseRecordType(e.getElementsByTagName(&quot;typeOfRecord&quot;).item(0).getTextContent())</span>
        );
<span class="fc" id="L138">        record.setId(Integer.parseInt(e.getAttribute(&quot;id&quot;)));</span>
<span class="fc" id="L139">        return record;</span>
    };

    private static String parseRecordTypeToString(RecordType recordType){
<span class="pc bpc" id="L143" title="2 of 4 branches missed.">        switch (recordType){</span>
            case CD -&gt; {
<span class="fc" id="L145">                return &quot;CD&quot;;</span>
            }
            case VINYL -&gt; {
<span class="fc" id="L148">                return &quot;VINYL&quot;;</span>
            }
            case TAPE -&gt; {
<span class="nc" id="L151">                return &quot;TAPE&quot;;</span>
            }
            default -&gt; {
<span class="nc" id="L154">                return &quot;&quot;;</span>
            }
        }
    }

    private static RecordType parseRecordType(String string){
<span class="fc" id="L160">        RecordType recordType = null;</span>
<span class="pc bpc" id="L161" title="2 of 4 branches missed.">        switch (string){</span>
<span class="fc" id="L162">            case &quot;CD&quot; -&gt; recordType = RecordType.CD;</span>
<span class="fc" id="L163">            case &quot;VINYL&quot; -&gt; recordType = RecordType.VINYL;</span>
<span class="nc" id="L164">            case &quot;TAPE&quot; -&gt; recordType = RecordType.TAPE;</span>
        }
<span class="fc" id="L166">        return recordType;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>